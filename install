#!/bin/zsh

export USERNAME=`whoami`
sudo chsh -s $(which zsh) $USERNAME

# GitHub Codespaces specific
if [ -n "${CODESPACES}" ]; then
fi

# DEBIAN specific
if [ -f "/etc/debian_version" ]; then
  sudo apt update
  sudo apt install -y \
    stow \
    tmux \
    fzf \
    ripgrep \

  curl -LO https://github.com/neovim/neovim/releases/latest/download/nvim-linux64.deb
  sudo apt install -y ./nvim-linux64.deb
fi

## Install starship
curl -sS https://starship.rs/install.sh | sh -s -- --yes

## Install prezto
git clone --recursive https://github.com/sorin-ionescu/prezto.git "${ZDOTDIR:-$HOME}/.zprezto"

rm -f ~/.zshrc # remove any default .zshrc so that stow won't fail

stow bin git terminal tmux vim zsh -t $HOME

## NEOVIM setup
git clone --depth 1 https://github.com/wbthomason/packer.nvim\
 ~/.local/share/nvim/site/pack/packer/start/packer.nvim
nvim --headless -c 'autocmd User PackerComplete quitall' -c 'PackerSync'

## Download Alacritty terminfo
curl -sSL https://raw.githubusercontent.com/alacritty/alacritty/master/extra/alacritty.info | tic -x -
